"use strict";angular.module("akat-form-creator",["textAngular","ngTagsInput"]),angular.module("akat-form-creator").directive("elembox",["$compile",function(a){return{templateUrl:"submodules/akat-form-creator/elements/box/elembox.html",replace:!0,restrict:"E",scope:{options:"="},link:function(b,c,d){var e=b.options&&b.options["class"]?b.options["class"]:null;if(e&&c.parent().addClass(e),b.options.fields){var f=a("<div class='subfields'></div>")(b);_.forEach(b.options.fields,function(d,e){var f=angular.element("<"+d.type+" />");f.attr("options","options.fields["+e+"]"),f.attr("parent",b.options.name),f.attr("model",'model["'+b.options.name+'"]');a(f)(b);c.append(a(f)(b))}),c.append(f)}}}}]),angular.module("akat-form-creator").directive("elemboxarray",["$compile","lodash","$timeout",function(a,b,c){return{templateUrl:"submodules/akat-form-creator/elements/boxarray/boxarray.html",replace:!0,restrict:"E",scope:{model:"=",options:"="},link:function(c,d,e){function f(a){a&&(d.empty(),b.each(b.range(c.keysize),g))}function g(b){c.options.subfields.forEach(function(e,f){var g=angular.element("<"+e.type+" />");g.attr("options",e),g.attr("model",'model["'+c.options.name+'"]['+b+"]");var h=a(g)(c);e.panel&&d.addClass("panel panel-default"),d.append(h)},this)}c.subfields=c.options.subfields,b.set(c,'model["'+c.options.name+'"]',[{}]),c.keysize=c.model[c.options.name].length,c.$watch("keysize",f),c.addElement=function(){c.model[c.options.name].push({}),++c.keysize},c.removeElement=function(a){delete c.model[c.options.name][a],--c.keysize},d.parent().addClass(c.options["class"])}}}]),angular.module("akat-form-creator").directive("elemcheckbox",function(){return{templateUrl:"submodules/akat-form-creator/elements/checkbox/checkbox.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",inline:"=",horizontal:"="},link:function(a,b){a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default")}}}),angular.module("akat-form-creator").directive("elemdatepicker",function(){return{templateUrl:"submodules/akat-form-creator/elements/datepicker/datepicker.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",inline:"=",horizontal:"="},link:function(a,b){function c(a){var b=a.date,c=a.mode;return"day"===c&&(0===b.getDay()||6===b.getDay())}function d(b){var c=b.date,d=b.mode;if("day"===d)for(var e=new Date(c).setHours(0,0,0,0),f=0;f<a.events.length;f++){var g=new Date(a.events[f].date).setHours(0,0,0,0);if(e===g)return a.events[f].status}return""}a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default"),a.init=function(){a.today(),a.toggleMin(),a.inlineOptions={customClass:d,minDate:new Date,showWeeks:!0},a.dateOptions={dateDisabled:c,formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1};var b=new Date;b.setDate(b.getDate()+1);var e=new Date;e.setDate(b.getDate()+1),a.events=[{date:b,status:"full"},{date:e,status:"partially"}],a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[0],a.altInputFormats=["M!/d!/yyyy"]},a.today=function(){a.dt=new Date},a.clear=function(){a.dt=null},a.toggleMin=function(){a.inlineOptions.minDate=a.inlineOptions.minDate?null:new Date,a.dateOptions.minDate=a.inlineOptions.minDate},a.open1=function(){a.popup1.opened=!0},a.open2=function(){a.popup2.opened=!0},a.setDate=function(b,c,d){a.dt=new Date(b,c,d)},a.popup1={opened:!1},a.popup2={opened:!1}}}}),angular.module("akat-form-creator").directive("elememail",function(){return{templateUrl:"submodules/akat-form-creator/elements/email/email.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",inline:"=",horizontal:"="},link:function(a,b){a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default")}}}),angular.module("akat-form-creator").directive("dynfields",["$compile",function(a){return{restrict:"E",replace:!0,scope:{name:"@",offset:"=",inline:"=",horizontal:"=",model:"=",options:"=",validation:"=",form:"="},link:function(b,c){b.model||(b.model={});var d=_.get(b,"options",{}),e=_.get(b,"name",null);d.fields&&_(d.fields).forEach(function(d,f){var g=angular.element("<"+d.type+" />"),h=(e?e+"-":"")+d.name;g.attr("options","options.fields["+f+"]"),g.attr("offset","offset"),g.attr("horizontal","horizontal"),g.attr("inline","inline"),g.attr("model",'model["'+d.name+'"]'),g.attr("name",h),g.attr("form","form"),g.attr("validation",'validation["'+h+'"]'),c.append(a(g)(b))})}}}]),angular.module("akat-form-creator").directive("dynform",["$compile",function(a){return{restrict:"E",replace:!0,scope:{structure:"=",model:"=",id:"="},link:function(b,c){var d=_.get(b,"structure",{}),e=!1,f=!1,g=!1;if(_.defaults(d,{root:"form",novalidate:!0}),!b.name&&!d.name){var h=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);d.name="dynform_"+h}var i=angular.element("<"+d.root+" />");i.attr("data-name",b.name||d.name),i.attr("data-options","options"),i.attr("data-model","model"),d.horizontal?(f=!0,i.addClass("form-horizontal"),e=d.offset||2):d.inline&&(g=!0,i.addClass("form-inline")),d.novalidate&&i.attr("novalidate"),d.panel&&i.addClass("panel panel-default"),d["class"]&&i.addClass(d["class"]);var j=a(i)(b);if(d.fields){var i=angular.element("<dynfields />");i.attr("data-options","structure"),i.attr("data-model","model"),i.attr("data-name",d.name),i.attr("data-form",d.name),i.attr("data-validation",d.name),!1!==e&&i.attr("data-offset",e),f&&i.attr("data-horizontal","true"),g&&i.attr("data-inline","true"),j.append(a(i)(b))}_(c.children()).forEach(function(a){j.append(a)}),c.append(j)}}}]),angular.module("akat-form-creator").directive("elempassword",function(){return{templateUrl:"submodules/akat-form-creator/elements/password/password.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",inline:"=",horizontal:"="},link:function(a,b){a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default")}}}),angular.module("akat-form-creator").directive("elemradio",function(){return{templateUrl:"submodules/akat-form-creator/elements/radio/radio.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",horizontal:"="},link:function(a,b){a.value=null,a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default"),a.update=function(b){a.model=b}}}}),angular.module("akat-form-creator").directive("elemrichtext",function(){return{templateUrl:"submodules/akat-form-creator/elements/richtext/richtext.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",horizontal:"="},link:function(a,b){a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default")}}}),angular.module("akat-form-creator").directive("elemselectbox",function(){return{templateUrl:"submodules/akat-form-creator/elements/selectbox/selectbox.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",inline:"=",horizontal:"="},link:function(a,b){a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default")}}}),angular.module("akat-form-creator").directive("elemtabs",function(){return{templateUrl:"submodules/akat-form-creator/elements/tabs/tabs.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",inline:"=",horizontal:"=",form:"="},link:function(a,b){var c=_.get(a,"options",{});a["class"]={},a.tabsHorizontal=_.has(c,"horizontal")?c.horizontal:a.horizontal,a.tabsInline=_.has(c,"inline")?c.inline:a.inline,a.tabsOffset=_.has(c,"offset")?c.offset:a.offset,a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),console.log(a["tabs-offset"]),c.panel&&b.addClass("panel panel-default"),a.model||(a.model={})}}}),angular.module("akat-form-creator").directive("elemtags",function(){return{templateUrl:"submodules/akat-form-creator/elements/tags/tags.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",horizontal:"="},link:function(a,b){a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default"),a.setData=function(a){return[{text:a}]}}}}),angular.module("akat-form-creator").directive("elemtextarea",function(){return{templateUrl:"submodules/akat-form-creator/elements/textarea/textarea.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",horizontal:"="},link:function(a,b){a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default")}}}),angular.module("akat-form-creator").directive("elemtextfield",function(){return{templateUrl:"submodules/akat-form-creator/elements/textfield/textfield.html",restrict:"E",replace:!0,scope:{name:"@",model:"=",options:"=",validation:"=",offset:"=",inline:"=",horizontal:"="},link:function(a,b){a["class"]={},a.horizontal&&(a["class"].wrapper="col-sm-"+(12-(a.offset||2)),_.get(a,"options.label",!1)?a["class"].label="control-label col-sm-"+a.offset||2:a["class"].wrapper+=" col-sm-offset-"+a.offset||2),_.has(a,"options.class")&&b.addClass(a.options["class"]),_.get(a,"options.panel",!1)&&b.addClass("panel panel-default")}}}),angular.module("akat-form-creator").run(["$templateCache",function(a){a.put("submodules/akat-form-creator/elements/box/elembox.html",'<div class="box">\n    <h2>{{options.title}}</h2>\n</div>'),a.put("submodules/akat-form-creator/elements/boxarray/boxarray.html",'<div class="box subfields">\n    <h2>{{options.title}}</h2>\n</div>'),a.put("submodules/akat-form-creator/elements/checkbox/checkbox.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div ng-style="inline && {\'display\': \'inline-block\'}" data-ng-class="class.wrapper">\n        <div class="checkbox">\n            <label>\n                <input type="checkbox" name="{{ name }}" ng-model="model">\n                {{options.text}}\n            </label>\n        </div>\n    </div>\n\n</div>\n'),a.put("submodules/akat-form-creator/elements/datepicker/datepicker.html",'<div class="form-group" ng-init="init()" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div ng-style="inline && {\'display\': \'inline-block\'}" data-ng-class="class.wrapper">\n        <div class="input-group">\n            <input\n                type="text"\n                name="{{ name }}"\n                class="form-control"\n                uib-datepicker-popup="{{format}}"\n                ng-model="model"\n                is-open="popup1.opened"\n                datepicker-options="dateOptions"\n                ng-required="true"\n                close-text="Close"\n                alt-input-formats="altInputFormats"\n            />\n\n            <span class="input-group-btn">\n                <button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>\n            </span>\n        </div>\n    </div>\n\n</div>\n'),a.put("submodules/akat-form-creator/elements/email/email.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div ng-style="inline && {\'display\': \'inline-block\'}" data-ng-class="class.wrapper">\n        <div class="input-group">\n            <span class="input-group-addon">@</span>\n            <input\n                type="email"\n                name="{{ name }}"\n                class="form-control"\n                placeholder="{{options.placeholder}}"\n                ng-model="model"\n\n                ng-attr-ng-minlength="{{ options.validators.minlength }}"\n                ng-attr-ng-maxlength="{{ options.validators.maxlength }}"\n                ng-required="options.required"\n            />\n        </div>\n\n        <div data-ng-if="!inline">\n            <p data-ng-show="validation.$touched && validation.$error.required" class="help-block">{{ options.name }} is required.</p>\n            <p data-ng-show="validation.$error.minlength" class="help-block">{{ options.name }} is too short.</p>\n            <p data-ng-show="validation.$error.maxlength" class="help-block">{{ options.name }} is too long.</p>\n            <p data-ng-show="validation.$error.email" class="help-block">{{ options.name }} is not a valid email.</p>\n        </div>\n    </div>\n\n</div>'),a.put("submodules/akat-form-creator/elements/password/password.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div ng-style="inline && {\'display\': \'inline-block\'}" data-ng-class="class.wrapper">\n        <input\n            type="password"\n            name="{{ name }}"\n            class="form-control"\n            placeholder="{{options.placeholder}}"\n            data-ng-model="model"\n\n            data-ng-attr-ng-minlength="{{ options.validators.minlength }}"\n            data-ng-attr-ng-maxlength="{{ options.validators.maxlength }}"\n            data-ng-required="options.required"\n        />\n\n        <div data-ng-if="!inline">\n            <p data-ng-show="validation.$touched && validation.$error.required" class="help-block">{{ options.name }} is required.</p>\n            <p data-ng-show="validation.$error.minlength" class="help-block">{{ options.name }} is too short.</p>\n            <p data-ng-show="validation.$error.maxlength" class="help-block">{{ options.name }} is too long.</p>\n        </div>\n    </div>\n\n</div>'),a.put("submodules/akat-form-creator/elements/radio/radio.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div data-ng-class="class.wrapper">\n        <div class="radio" ng-repeat="radio in options.values">\n            <label>\n                <input type="radio" data-ng-model="value" data-ng-change="update(radio.value)" name="{{ name }}" value="{{ radio.value }}" >\n                {{ radio.text }}\n            </label>\n        </div>\n    </div>\n\n</div>\n'),a.put("submodules/akat-form-creator/elements/richtext/richtext.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div data-ng-class="class.wrapper">\n        <text-angular ng-model="model"></text-angular>\n    </div>\n\n</div>\n'),a.put("submodules/akat-form-creator/elements/selectbox/selectbox.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div ng-style="inline && {\'display\': \'inline-block\'}" data-ng-class="class.wrapper">\n        <select name="{{ name }}" class="form-control" data-ng-model="model">\n            <option ng-repeat="option in options.options" value="{{option.id}}">{{option.name}}</option>\n        </select>\n    </div>\n</div>\n'),a.put("submodules/akat-form-creator/elements/tabs/tabs.html",'<div class="form-group">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div data-ng-class="class.wrapper">\n        <uib-tabset active="active">\n            <uib-tab index="$index + 1" ng-repeat="tab in options.tabs" heading="{{ tab.tabname }}">\n                <uib-tab-heading>{{ tab.tabname }}</uib-tab-heading>\n                    <br/>\n                    <dynfields\n                        data-name="{{ (name ? name + \'-\' : \'\') + tab.tabname }}"\n                        data-options="tab"\n                        data-model="model[tab.tabname]"\n                        data-validation="form"\n                        data-form="form"\n                        data-offset="tabsOffset"\n                        data-inline="tabsInline"\n                        data-horizontal="tabsHorizontal"\n                    ></dynfields>\n                <hr>\n            </uib-tab>\n        </uib-tabset>\n    </div>\n</div>'),a.put("submodules/akat-form-creator/elements/tags/tags.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div data-ng-class="class.wrapper">\n        <tags-input\n            name="{{ ::name }}"\n            ng-model="model"\n            ng-attr-min-tags="{{ options.validators.minlength }}"\n            ng-attr-max-tags="{{ options.validators.maxlength }}"\n            ng-attr-allow-leftover-text="{{ options.allowLeftOverText }}"\n            ng-required="options.required"\n        >\n            <auto-complete source="setData($query)"></auto-complete>\n        </tags-input>\n\n        <div>\n            <p data-ng-show="validation.$touched && validation.$error.required" class="help-block">{{ options.name }} is required.</p>\n            <p data-ng-show="validation.$error.minlength" class="help-block">{{ options.name }} is too short.</p>\n            <p data-ng-show="validation.$error.maxlength" class="help-block">{{ options.name }} is too long.</p>\n        </div>\n    </div>\n\n</div>\n'),a.put("submodules/akat-form-creator/elements/textarea/textarea.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div data-ng-class="class.wrapper">\n        <textarea\n            name="{{ ::name }}"\n            rows="{{ options.rows || 4 }}"\n            cols="{{ options.cols || 50 }}"\n            class="form-control"\n            placeholder="{{options.placeholder}}"\n            ng-model="model"\n\n            ng-attr-ng-minlength="{{ options.validators.minlength }}"\n            ng-attr-ng-maxlength="{{ options.validators.maxlength }}"\n            ng-required="options.required"\n        ></textarea>\n\n        <div>\n            <p data-ng-show="validation.$touched && validation.$error.required" class="help-block">{{ options.name }} is required.</p>\n            <p data-ng-show="validation.$error.minlength" class="help-block">{{ options.name }} is too short.</p>\n            <p data-ng-show="validation.$error.maxlength" class="help-block">{{ options.name }} is too long.</p>\n        </div>\n    </div>\n\n</div>\n'),a.put("submodules/akat-form-creator/elements/textfield/textfield.html",'<div class="form-group" data-ng-class="{ \'has-error\' : validation.$touched && validation.$invalid }">\n\n    <label data-ng-if="options.label" data-ng-class="class.label">{{ options.label }}</label>\n\n    <div ng-style="inline && {\'display\': \'inline-block\'}" data-ng-class="class.wrapper">\n        <input\n            type="text"\n            name="{{ name }}"\n            class="form-control"\n            placeholder="{{options.placeholder}}"\n            data-ng-model="model"\n\n            data-ng-attr-ng-minlength="{{ options.validators.minlength }}"\n            data-ng-attr-ng-maxlength="{{ options.validators.maxlength }}"\n            data-ng-required="options.required"\n        />\n\n        <div data-ng-if="!inline">\n            <p data-ng-show="validation.$touched && validation.$error.required" class="help-block">{{ options.name }} is required.</p>\n            <p data-ng-show="validation.$error.minlength" class="help-block">{{ options.name }} is too short.</p>\n            <p data-ng-show="validation.$error.maxlength" class="help-block">{{ options.name }} is too long.</p>\n        </div>\n    </div>\n\n</div>\n')}]);